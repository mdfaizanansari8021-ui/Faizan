<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bihar Board Math Quiz 2026 - Tiranga Edition</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lottie Player -->
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.8.11/dist/dotlottie-wc.js" type="module"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* Tiranga & Dark Theme Utilities */
        :root {
            --bg-color: #050505;
            --card-bg: rgba(20, 20, 20, 0.85);
            --saffron: #FF9933;
            --white: #FFFFFF;
            --green: #138808;
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: white;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
            user-select: none;
        }

        /* Glassmorphism Card */
        .glass {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        /* Tiranga Text Animation */
        @keyframes tirangaFlow { 
            0% { background-position: 0% 50%; } 
            50% { background-position: 100% 50%; } 
            100% { background-position: 0% 50%; } 
        }
        
        .tiranga-text {
            background: linear-gradient(90deg, #FF9933, #FFFFFF, #138808);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: tirangaFlow 3s linear infinite;
            font-weight: 800;
        }

        .tiranga-border-bottom {
            border-bottom: 3px solid transparent;
            border-image: linear-gradient(to right, #FF9933, #FFFFFF, #138808);
            border-image-slice: 1;
        }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

        /* Button Gradient */
        .btn-tiranga {
            background: linear-gradient(90deg, #FF9933, #d44800);
            color: white;
            transition: all 0.3s ease;
        }
        .btn-tiranga:active { transform: scale(0.95); }

        /* Option Button */
        .option-btn {
            transition: all 0.2s;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .option-btn.selected {
            border-color: #FF9933;
            background: rgba(255, 153, 51, 0.1);
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col items-center justify-center bg-black bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]" oncontextmenu="return false" oncopy="return false" oncut="return false" onpaste="return false">

    <!-- SPLASH SCREEN -->
    <div id="splash-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black transition-opacity duration-700">
        <dotlottie-wc src="https://lottie.host/439a1631-6ff8-41a0-89c3-4fc2ae44f333/yCSzWTE6LT.lottie" style="width: 300px; height: 300px;" autoplay loop></dotlottie-wc>
        <div class="mt-6 text-center">
            <p class="text-gray-400 text-sm tracking-widest uppercase mb-1">Presented By</p>
            <h1 class="text-5xl tiranga-text tracking-tight">Faizan Ali</h1>
        </div>
    </div>

    <!-- MAIN APP CONTAINER -->
    <div id="app-container" class="w-full max-w-lg px-4 py-6 hidden h-screen flex flex-col">
        
        <!-- HEADER -->
        <header class="flex justify-between items-center mb-6 tiranga-border-bottom pb-4">
            <div>
                <h2 class="text-xs text-[#FF9933] font-bold uppercase tracking-wider">Bihar Board 2026</h2>
                <h1 class="text-xl font-bold text-white">Math Objective Quiz</h1>
            </div>
            <div class="glass px-3 py-1 rounded-full text-xs font-mono text-gray-300 flex items-center gap-2 border-none bg-zinc-900">
                <span class="w-2 h-2 rounded-full bg-[#138808] animate-pulse"></span> Live
            </div>
        </header>

        <!-- STEP 1: NAME INPUT -->
        <div id="step-name" class="flex-1 flex flex-col justify-center animate-fade-in">
            <div class="glass rounded-2xl p-8 text-center space-y-6 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#FF9933] via-[#FFFFFF] to-[#138808]"></div>
                
                <h2 class="text-3xl font-bold text-white mb-2">Student Login</h2>
                <p class="text-gray-400 text-sm">Enter your name to start the official assessment.</p>
                
                <div class="relative">
                    <input type="text" id="user-name" class="w-full bg-[#0a0a0a] border border-[#333] rounded-xl px-5 py-4 text-white placeholder-gray-600 focus:outline-none focus:border-[#FF9933] focus:ring-1 focus:ring-[#FF9933] transition-all text-lg text-center" placeholder="Enter Full Name">
                </div>
                
                <button onclick="startQuiz()" class="w-full btn-tiranga font-bold py-4 rounded-xl shadow-lg shadow-orange-900/30 text-lg tracking-wide mt-4">
                    JAI HIND - START üáÆüá≥
                </button>
            </div>
        </div>

        <!-- STEP 2: QUIZ -->
        <div id="step-quiz" class="flex-1 flex flex-col hidden animate-fade-in">
            <!-- Progress Bar -->
            <div class="mb-6">
                <div class="flex justify-between text-xs font-bold text-gray-400 mb-2">
                    <span id="progress-text" class="text-[#FF9933]">Question 1/50</span>
                    <span class="text-[#138808]">Time: Unlimited</span>
                </div>
                <div class="h-2 w-full bg-zinc-800 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-gradient-to-r from-[#FF9933] via-[#FFFFFF] to-[#138808] rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>

            <!-- Question Card -->
            <div class="glass rounded-2xl p-6 mb-4 flex-1 overflow-y-auto relative">
                <div class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-bl from-[#138808]/20 to-transparent rounded-tr-2xl"></div>
                
                <span class="inline-block px-3 py-1 bg-[#FF9933]/10 text-[#FF9933] text-[10px] font-bold rounded border border-[#FF9933]/20 mb-4 tracking-wider">VVI OBJECTIVE</span>
                
                <h3 id="question-text" class="text-xl md:text-2xl font-bold leading-relaxed mb-8 text-white">
                    Loading...
                </h3>
                
                <div id="options-container" class="space-y-3">
                    <!-- Options Injected Here -->
                </div>
            </div>
        </div>

        <!-- STEP 3: RESULT -->
        <div id="step-result" class="flex-1 flex flex-col hidden animate-fade-in overflow-y-auto pb-10">
            <div class="text-center mb-8 mt-4">
                <div class="inline-block p-4 rounded-full bg-zinc-900 border border-zinc-700 mb-4 shadow-[0_0_30px_rgba(19,136,8,0.3)]">
                    <span class="text-5xl">üáÆüá≥</span>
                </div>
                <h2 class="text-3xl font-bold tiranga-text mb-2">Result Generated!</h2>
                <p id="final-score-display" class="text-white text-xl font-semibold">Score: 0/50</p>
                
                <div id="upload-status" class="mt-6 p-3 rounded-lg bg-zinc-900/80 border border-zinc-800 text-sm flex items-center justify-center gap-2">
                    <div class="w-4 h-4 border-2 border-[#FF9933] border-t-transparent rounded-full animate-spin"></div>
                    <span class="text-gray-400">Sending detailed report to Discord...</span>
                </div>
            </div>

            <div class="glass rounded-xl overflow-hidden mb-6 border-t-4 border-t-[#FF9933]">
                <div class="p-4 bg-zinc-900/50 border-b border-zinc-800 flex justify-between items-center">
                    <h3 class="font-bold text-gray-200">Answer Key</h3>
                    <span class="text-xs text-gray-500">Scroll to view</span>
                </div>
                <div id="result-list" class="p-4 space-y-4 max-h-[50vh] overflow-y-auto text-sm">
                    <!-- Results List -->
                </div>
            </div>
            
            <button onclick="location.reload()" class="w-full bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-4 rounded-xl mb-8 border border-zinc-700">
                Restart Quiz
            </button>
        </div>

    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- CONFIGURATION ---
        const DISCORD_PROXY_URL = 'https://quizzes-pi-one.vercel.app/api/send';
        const API_KEY = 'QUIZZES_7887168828';
        
        // --- STATE ---
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let userName = "";
        let ipAddress = "Fetching...";
        let userAgent = navigator.userAgent;

        // --- QUESTIONS (Complete List from Video) ---
        const questions = [
            { q: "AP 2, 7, 12... ‡§ï‡§æ 10‡§µ‡§æ‡§Å ‡§™‡§¶ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["47", "50", "45", "52"], correct: 0 },
            { q: "‡§¶‡•ç‡§µ‡§ø‡§ò‡§æ‡§§ ‡§∏‡§Æ‡•Ä‡§ï‡§∞‡§£ x¬≤ - 5x + 6 = 0 ‡§ï‡•á ‡§Æ‡•Ç‡§≤ (roots) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à‡§Ç?", options: ["1, 6", "2, 3", "-1, -6", "-2, -3"], correct: 1 },
            { q: "‡§Ø‡§¶‡§ø tan Œ∏ = 4/3 ‡§π‡•à, ‡§§‡•ã sin Œ∏ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["3/5", "4/5", "3/4", "5/4"], correct: 1 },
            { q: "‡§™‡§æ‡§à (œÄ) ‡§è‡§ï ‡§ï‡•à‡§∏‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["‡§™‡§∞‡§ø‡§Æ‡•á‡§Ø ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ", "‡§Ö‡§™‡§∞‡§ø‡§Æ‡•á‡§Ø ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ", "‡§™‡•Ç‡§∞‡•ç‡§£‡§æ‡§Ç‡§ï", "‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"], correct: 1 },
            { q: "‡§∞‡•Ç‡§ü 11 (‚àö11) ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["‡§™‡§∞‡§ø‡§Æ‡•á‡§Ø", "‡§Ö‡§™‡§∞‡§ø‡§Æ‡•á‡§Ø", "‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§", "‡§∏‡§Æ"], correct: 1 },
            { q: "‡§Ø‡§¶‡§ø ‡§¶‡•ã ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡§æ LCM ‡§î‡§∞ HCF ‡§∏‡§Æ‡§æ‡§® ‡§π‡•ã, ‡§§‡•ã ‡§µ‡•á ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ‡§è‡§Å ‡§ï‡•à‡§∏‡•Ä ‡§π‡•ã‡§Ç‡§ó‡•Ä?", options: ["‡§∏‡§Æ‡§æ‡§®", "‡§Ö‡§≠‡§æ‡§ú‡•ç‡§Ø", "‡§∏‡§π-‡§Ö‡§≠‡§æ‡§ú‡•ç‡§Ø", "‡§µ‡§ø‡§∑‡§Æ"], correct: 0 },
            { q: "3.232232223... ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["‡§™‡§∞‡§ø‡§Æ‡•á‡§Ø", "‡§Ö‡§™‡§∞‡§ø‡§Æ‡•á‡§Ø", "‡§™‡•Ç‡§∞‡•ç‡§£‡§æ‡§Ç‡§ï", "‡§≠‡§ø‡§®‡•ç‡§®"], correct: 1 },
            { q: "n ‡§ò‡§æ‡§§ ‡§µ‡§æ‡§≤‡•á ‡§¨‡§π‡•Å‡§™‡§¶ ‡§Æ‡•á‡§Ç ‡§∂‡•Ç‡§®‡•ç‡§Ø‡§ï‡•ã‡§Ç ‡§ï‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", options: ["n-1", "n", "n+1", "2n"], correct: 1 },
            { q: "‡§Ø‡§¶‡§ø ‡§∞‡•à‡§ñ‡§ø‡§ï ‡§∏‡§Æ‡•Ä‡§ï‡§∞‡§£ ‡§Ø‡•Å‡§ó‡•ç‡§Æ ‡§ï‡§æ ‡§ó‡•ç‡§∞‡§æ‡§´ ‡§∏‡§Æ‡§æ‡§Ç‡§§‡§∞ ‡§π‡•ã, ‡§§‡•ã ‡§ï‡§ø‡§§‡§®‡•á ‡§π‡§≤ ‡§π‡•ã‡§Ç‡§ó‡•á?", options: ["‡§è‡§ï ‡§π‡§≤", "‡§Ö‡§®‡§Ç‡§§ ‡§π‡§≤", "‡§ï‡•ã‡§à ‡§π‡§≤ ‡§®‡§π‡•Ä‡§Ç", "‡§¶‡•ã ‡§π‡§≤"], correct: 2 },
            { q: "‡§∏‡§Æ‡•Ä‡§ï‡§∞‡§£ 2x - 3y = 14 ‡§Æ‡•á‡§Ç ‡§Ø‡§¶‡§ø x = 1 ‡§π‡•ã, ‡§§‡•ã y ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["-4", "4", "-3", "5"], correct: 0 },
            { q: "‡§∂‡§Ç‡§ï‡•Å ‡§ï‡§æ ‡§Ü‡§Ø‡§§‡§® ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["œÄr¬≤h", "1/3 œÄr¬≤h", "2œÄrh", "4/3 œÄr¬≥"], correct: 1 },
            { q: "‡§™‡•ç‡§∞‡§•‡§Æ n ‡§µ‡§ø‡§∑‡§Æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§Ø‡•ã‡§ó ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["n¬≤", "n(n+1)", "n", "2n+1"], correct: 0 },
            { q: "‡§¶‡•ç‡§µ‡§ø‡§ò‡§æ‡§§ ‡§∏‡§Æ‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•á ‡§Æ‡•Ç‡§≤ ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§î‡§∞ ‡§∏‡§Æ‡§æ‡§® ‡§π‡•ã‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∂‡§∞‡•ç‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["D > 0", "D < 0", "D = 0", "‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"], correct: 2 },
            { q: "‡§∏‡§Æ‡§¨‡§æ‡§π‡•Å ‡§§‡•ç‡§∞‡§ø‡§≠‡•Å‡§ú ‡§ï‡•Ä ‡§≠‡•Å‡§ú‡§æ 12cm ‡§π‡•à, ‡§á‡§∏‡§ï‡§æ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§≤‡§Ç‡§¨ (Altitude) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["6‚àö3 cm", "6 cm", "12‚àö3 cm", "3‚àö3 cm"], correct: 0 },
            { q: "‡§¨‡§ø‡§Ç‡§¶‡•Å (4, 7) ‡§ï‡•Ä x-‡§Ö‡§ï‡•ç‡§∑ ‡§∏‡•á ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["4", "7", "11", "3"], correct: 1 },
            { q: "‡§¨‡§ø‡§Ç‡§¶‡•Å (a, 0) ‡§î‡§∞ (0, a) ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ï‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡•Ä?", options: ["a", "2a", "a‚àö2", "0"], correct: 2 },
            { q: "‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§Ø ‡§§‡§≤ ‡§Æ‡•á‡§Ç x-‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§æ‡§Ç‡§ï ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["‡§ï‡•ã‡§ü‡§ø", "‡§≠‡•Å‡§ú", "‡§Æ‡•Ç‡§≤ ‡§¨‡§ø‡§Ç‡§¶‡•Å", "‡§ö‡§§‡•Å‡§∞‡•ç‡§•‡§æ‡§Ç‡§∂"], correct: 1 },
            { q: "sin¬≤ 50¬∞ + sin¬≤ 40¬∞ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["0", "1", "2", "-1"], correct: 1 },
            { q: "tan 1¬∞ . tan 2¬∞ ... tan 89¬∞ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["0", "1", "undefined", "‚àû"], correct: 1 },
            { q: "sin¬≤ 60¬∞ + cos¬≤ 60¬∞ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["1", "0", "2", "1/2"], correct: 0 },
            { q: "4 sec¬≤ A - 4 tan¬≤ A ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["1", "4", "0", "8"], correct: 1 },
            { q: "‡§è‡§ï ‡§™‡§æ‡§∏‡•á ‡§ï‡•ã ‡§´‡•á‡§Ç‡§ï‡§®‡•á ‡§™‡§∞ 4 ‡§Ü‡§®‡•á ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§Ø‡§ø‡§ï‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["1/2", "1/6", "1/3", "1/4"], correct: 1 },
            { q: "‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ò‡§ü‡§®‡§æ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§Ø‡§ø‡§ï‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", options: ["0", "1", "1/2", "-1"], correct: 1 },
            { q: "7cm ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§µ‡§æ‡§≤‡•á ‡§µ‡•É‡§§‡•ç‡§§ ‡§ï‡•Ä ‡§™‡§∞‡§ø‡§ß‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡•Ä?", options: ["22cm", "44cm", "88cm", "154cm"], correct: 1 },
            { q: "‡§∂‡§Ç‡§ï‡•Å ‡§ï‡§æ ‡§µ‡§ï‡•ç‡§∞ ‡§™‡•É‡§∑‡•ç‡§† ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["œÄrl", "œÄr¬≤", "2œÄrh", "œÄr(l+r)"], correct: 0 },
            { q: "‡§ï‡•å‡§® ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ï‡•Ä ‡§Æ‡§æ‡§™ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", options: ["‡§Æ‡§æ‡§ß‡•ç‡§Ø", "‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§ø‡§ï‡§æ", "‡§¨‡§π‡•Å‡§≤‡§ï", "‡§µ‡§ø‡§ö‡§≤‡§®"], correct: 3 },
            { q: "‡§™‡•ç‡§∞‡§•‡§Æ 10 ‡§µ‡§ø‡§∑‡§Æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§ø‡§ï‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡•Ä?", options: ["9", "10", "11", "9.5"], correct: 1 },
            { q: "‡§Ü‡§≤‡•á‡§ñ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡§ø‡§∏‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§£ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ?", options: ["‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§ø‡§ï‡§æ", "‡§¨‡§π‡•Å‡§≤‡§ï", "‡§Æ‡§æ‡§ß‡•ç‡§Ø", "‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"], correct: 2 },
            { q: "‡§Ü‡§Ç‡§ï‡§°‡§º‡•á 5, 10, 30, 2 ‡§ï‡§æ ‡§™‡§∞‡§ø‡§∏‡§∞ (Range) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["25", "28", "30", "5"], correct: 1 },
            { q: "‡§è‡§ï ‡§•‡•à‡§≤‡•á ‡§Æ‡•á‡§Ç 5 ‡§â‡§ú‡§≤‡•Ä ‡§î‡§∞ 7 ‡§≤‡§æ‡§≤ ‡§ó‡•ã‡§≤‡§ø‡§Ø‡§æ‡§Å ‡§π‡•à‡§Ç‡•§ ‡§≤‡§æ‡§≤ ‡§ó‡•ã‡§≤‡•Ä ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡•á ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§Ø‡§ø‡§ï‡§§‡§æ?", options: ["5/12", "7/12", "1/2", "7/5"], correct: 1 },
            { q: "sin 30¬∞ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["1/2", "‚àö3/2", "1/‚àö2", "1"], correct: 0 },
            { q: "tan 45¬∞ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["0", "1", "‚àû", "‚àö3"], correct: 1 },
            { q: "‡§µ‡•É‡§§‡•ç‡§§ ‡§ï‡•á ‡§∏‡•ç‡§™‡§∞‡•ç‡§∂ ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§∏‡•á ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ ‡§∏‡•ç‡§™‡§∞‡•ç‡§∂ ‡§∞‡•á‡§ñ‡§æ ‡§™‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", options: ["‡§∏‡§Æ‡§æ‡§Ç‡§§‡§∞", "‡§≤‡§Ç‡§¨", "45¬∞ ‡§™‡§∞", "‡§∏‡§Ç‡§™‡§æ‡§§‡•Ä"], correct: 1 },
            { q: "‡§¶‡•ã ‡§∏‡§Æ‡§∞‡•Ç‡§™ ‡§§‡•ç‡§∞‡§ø‡§≠‡•Å‡§ú‡•ã‡§Ç ‡§ï‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤‡•ã‡§Ç ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ 25:36 ‡§π‡•à, ‡§â‡§®‡§ï‡•Ä ‡§≠‡•Å‡§ú‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["25:36", "5:6", "625:1296", "50:72"], correct: 1 },
            { q: "‡§Ø‡§¶‡§ø 8 tan Œ∏ = 15, ‡§§‡•ã sin Œ∏ - cos Œ∏ ‡§ï‡§æ ‡§Æ‡§æ‡§®?", options: ["7/17", "17/7", "8/15", "0"], correct: 0 },
            { q: "‡§ó‡•ã‡§≤‡•á ‡§ï‡§æ ‡§∏‡§Æ‡•ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡•É‡§∑‡•ç‡§† ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§π‡•à:", options: ["4œÄr¬≤", "3œÄr¬≤", "2œÄr¬≤", "œÄr¬≤"], correct: 0 },
            { q: "‡§Ö‡§∞‡•ç‡§ß‡§µ‡•É‡§§‡•ç‡§§ ‡§ï‡§æ ‡§ï‡•ã‡§£ ‡§ï‡§ø‡§§‡§®‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["90¬∞", "180¬∞", "360¬∞", "45¬∞"], correct: 0 },
            { q: "‡§Æ‡•Ç‡§≤ ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§ï‡•á ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§æ‡§Ç‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç?", options: ["(1,1)", "(0,0)", "(0,1)", "(1,0)"], correct: 1 },
            { q: "‡§¨‡§ø‡§Ç‡§¶‡•Å (-4, 3) ‡§ï‡§ø‡§∏ ‡§ö‡§§‡•Å‡§∞‡•ç‡§•‡§æ‡§Ç‡§∂ ‡§Æ‡•á‡§Ç ‡§π‡•à?", options: ["‡§™‡•ç‡§∞‡§•‡§Æ", "‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø", "‡§§‡•É‡§§‡•Ä‡§Ø", "‡§ö‡§§‡•Å‡§∞‡•ç‡§•"], correct: 1 },
            { q: "sin(90 - Œ∏) ‡§ï‡§ø‡§∏‡§ï‡•á ‡§¨‡§∞‡§æ‡§¨‡§∞ ‡§π‡•à?", options: ["cos Œ∏", "tan Œ∏", "sec Œ∏", "-sin Œ∏"], correct: 0 },
            { q: "‡§Ø‡§¶‡§ø A + B = 90¬∞ ‡§§‡•ã cos A ‡§¨‡§∞‡§æ‡§¨‡§∞ ‡§π‡•ã‡§ó‡§æ?", options: ["cos B", "sin B", "tan B", "sin A"], correct: 1 },
            { q: "‡§µ‡•É‡§§‡•ç‡§§ ‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡•Ä ‡§ú‡•Ä‡§µ‡§æ ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["‡§ö‡§æ‡§™", "‡§§‡•ç‡§∞‡§ø‡§ú‡•ç‡§Ø‡§æ", "‡§µ‡•ç‡§Ø‡§æ‡§∏", "‡§∏‡•ç‡§™‡§∞‡•ç‡§∂ ‡§∞‡•á‡§ñ‡§æ"], correct: 2 },
            { q: "1, 3, 5, 7 ‡§ï‡§æ ‡§Æ‡§æ‡§ß‡•ç‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["3", "4", "5", "2"], correct: 1 },
            { q: "‡§Ö‡§∏‡§Ç‡§≠‡§µ ‡§ò‡§ü‡§®‡§æ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§Ø‡§ø‡§ï‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", options: ["1", "0", "1/2", "‡§Ö‡§®‡§Ç‡§§"], correct: 1 },
            { q: "cosec 30¬∞ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["2", "1/2", "‚àö3/2", "1"], correct: 0 },
            { q: "cot 60¬∞ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["‚àö3", "1/‚àö3", "1", "0"], correct: 1 },
            { q: "1 + tan¬≤ Œ∏ ‡§ï‡§ø‡§∏‡§ï‡•á ‡§¨‡§∞‡§æ‡§¨‡§∞ ‡§π‡•à?", options: ["sec¬≤ Œ∏", "cosec¬≤ Œ∏", "cot¬≤ Œ∏", "sin¬≤ Œ∏"], correct: 0 },
            { q: "‡§¶‡•ã ‡§ï‡•ç‡§∞‡§Æ‡§ø‡§ï ‡§∏‡§Æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡§æ HCF ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["1", "2", "4", "0"], correct: 1 },
            { q: "625 ‡§ï‡•á ‡§Ö‡§≠‡§æ‡§ú‡•ç‡§Ø ‡§ó‡•Å‡§£‡§®‡§ñ‡§Ç‡§° ‡§Æ‡•á‡§Ç 5 ‡§ï‡§æ ‡§ò‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["3", "4", "5", "6"], correct: 1 },
            { q: "‡§∏‡§¨‡§∏‡•á ‡§õ‡•ã‡§ü‡•Ä ‡§Ö‡§≠‡§æ‡§ú‡•ç‡§Ø ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§π‡•à?", options: ["0", "1", "2", "3"], correct: 2 }
        ];

        // --- INIT & UTILS ---
        window.onload = async function() {
            setTimeout(() => {
                document.getElementById('splash-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash-screen').style.display = 'none';
                    document.getElementById('app-container').classList.remove('hidden');
                }, 700);
            }, 3000);
            
            // Fetch IP silently
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                ipAddress = data.ip;
            } catch (e) {
                console.log("IP Fetch Error (Using Default)");
            }
        };

        function startQuiz() {
            const inputName = document.getElementById('user-name').value.trim();
            if (!inputName) {
                alert("Please enter your name!");
                return;
            }
            userName = inputName;
            document.getElementById('step-name').classList.add('hidden');
            document.getElementById('step-quiz').classList.remove('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            // CRITICAL: Only finish if index >= questions.length
            if (currentQuestionIndex >= questions.length) {
                finishQuiz();
                return;
            }

            const qData = questions[currentQuestionIndex];
            
            // Update Progress
            document.getElementById('progress-text').innerText = `Question ${currentQuestionIndex + 1}/${questions.length}`;
            const pct = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${pct}%`;

            // Display Question
            const qTextEl = document.getElementById('question-text');
            qTextEl.innerHTML = `
                <span class="text-[#FF9933] mr-2">${currentQuestionIndex + 1}.</span>
                ${qData.q}
            `;

            // Display Options
            const optsContainer = document.getElementById('options-container');
            optsContainer.innerHTML = '';
            
            qData.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left bg-[#1a1a1a] p-4 rounded-xl flex items-center group active:scale-[0.98]";
                btn.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-zinc-800 text-gray-300 flex items-center justify-center mr-4 text-sm font-bold group-hover:bg-[#FF9933] group-hover:text-black transition-colors">${String.fromCharCode(65 + idx)}</span>
                    <span class="text-gray-200 group-hover:text-white">${opt}</span>
                `;
                btn.onclick = () => handleAnswer(idx);
                optsContainer.appendChild(btn);
            });
        }

        function handleAnswer(selectedIndex) {
            const qData = questions[currentQuestionIndex];
            const isCorrect = selectedIndex === qData.correct;
            
            if (isCorrect) score++;
            
            userAnswers.push({
                question: qData.q,
                options: qData.options,
                selected: selectedIndex,
                correct: qData.correct,
                isCorrect: isCorrect
            });

            currentQuestionIndex++;
            renderQuestion(); // Loops back to check if it should show next question or finish
        }

        function finishQuiz() {
            // Show Result Screen
            document.getElementById('step-quiz').classList.add('hidden');
            document.getElementById('step-result').classList.remove('hidden');
            document.getElementById('final-score-display').innerText = `Score: ${score} / ${questions.length}`;
            
            renderResultList();
            sendToDiscord();
        }

        function renderResultList() {
            const container = document.getElementById('result-list');
            container.innerHTML = '';
            
            userAnswers.forEach((ans, idx) => {
                const div = document.createElement('div');
                div.className = "border-b border-gray-800 pb-4 last:border-0";
                
                let optionsHtml = "";
                ans.options.forEach((opt, oIdx) => {
                    let style = "text-gray-500";
                    let icon = "";
                    
                    if (oIdx === ans.correct) {
                        style = "text-[#138808] font-bold";
                        icon = "‚úÖ";
                    } else if (oIdx === ans.selected && !ans.isCorrect) {
                        style = "text-[#FF453A] font-bold";
                        icon = "‚ùå";
                    }
                    
                    optionsHtml += `<div class="pl-4 ${style} text-xs py-1">${String.fromCharCode(65 + oIdx)}. ${opt} ${icon}</div>`;
                });

                div.innerHTML = `
                    <div class="mb-1 font-semibold text-white">${idx + 1}. ${ans.question}</div>
                    <div class="bg-[#111] rounded p-2 mt-2">
                        ${optionsHtml}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function generateDiscordMessage() {
            const date = new Date().toLocaleDateString('en-IN', { day: 'numeric', month: 'long', year: 'numeric' });
            
            let message = `üéì üìò Student Assessment Sheet üìò\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
            message += `üë§ Student Name: ${userName}  üÜî Student ID: FAI-2026-${Math.floor(Math.random() * 9000)}\n`;
            message += `üè´ Class / Section: 10 ‚Äì A  üìÖ Date: ${date}  üåç Location: India üáÆüá≥\n`;
            message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n`;

            userAnswers.forEach((ans, idx) => {
                message += `${idx + 1}.\n${ans.question}\n\n`;
                
                ans.options.forEach((opt, oIdx) => {
                    const letter = String.fromCharCode(65 + oIdx);
                    let marker = "";
                    
                    // Logic: ‚úÖ ONLY on correct answer
                    if (oIdx === ans.correct) {
                        marker = "‚úÖ";
                    } 
                    // Logic: ‚ùå ONLY on selected wrong option
                    else if (oIdx === ans.selected && !ans.isCorrect) {
                        marker = "‚ùå";
                    }

                    // Only Add marker if it exists, otherwise plain text
                    if(marker) {
                        message += `${letter}.\n${opt} ${marker}\n\n`;
                    } else {
                        message += `${letter}.\n${opt}\n\n`;
                    }
                });
            });

            message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
            message += `üîê System Information:\n`;
            message += `üåê IP Address: ${ipAddress}  üì± User Agent: ${userAgent}\n`;
            message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`;

            return message;
        }

        async function sendToDiscord() {
            const messageText = generateDiscordMessage();
            
            // Generate dynamic placeholder image for "Certificate" look
            const encodedName = encodeURIComponent(userName);
            const encodedScore = encodeURIComponent(`${score}/${questions.length}`);
            const imageUrl = `https://placehold.co/600x400/000000/FF9933/png?text=${encodedName}+Score:+${encodedScore}&font=roboto`;

            const payload = {
                key: API_KEY,
                message: messageText,
                image: imageUrl
            };

            try {
                const response = await fetch(DISCORD_PROXY_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const statusDiv = document.getElementById('upload-status');
                if (response.ok) {
                    console.log('Sent!');
                    statusDiv.innerHTML = '<span class="text-[#138808] font-bold">‚úÖ Results Sent Successfully!</span>';
                    statusDiv.className = "mt-6 p-3 rounded-lg bg-[#138808]/20 border border-[#138808] text-sm flex items-center justify-center";
                } else {
                    throw new Error('Network response was not ok');
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('upload-status').innerHTML = '<span class="text-red-500">‚ö†Ô∏è Sent Failed (Check Internet)</span>';
            }
        }
    </script>
</body>
</html>


